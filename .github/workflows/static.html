<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Bot Interaction</title>
</head>
<body>

<h2>Chat with Telegram Bot</h2>

<!-- Input field for the message -->
<input type="text" id="userMessage" placeholder="Enter your message">
<button onclick="sendMessage()">Send</button>

<!-- Display the bot's response -->
<p id="botResponse"></p>

<script>
// Your Telegram bot token and chat ID (DO NOT USE IN PRODUCTION, Exposes credentials)
const botToken = '6756223180:AAGxGxHHhRtLxMKSSs6XxMmv-igmZ0QTpYc';  // Replace with your bot token
const chatId = '6714868368';      // Replace with your chat ID

// Predefined responses for specific messages
const responses = {
    "hi": ["Hello!", "Namaste!", "Kya haal hai?"],
    "kaise ho": ["Main theek hoon, aap kaise hain?", "Main mast hoon"],
    "tum mere liye kya kar sakti ho": ["Main aapke liye kuch bhi kar sakti hoon!"],
    "tume kisne banaya hai": ["Mujhe Surendra ne banaya hai"]
};

// Default response if no match is found
const defaultResponse = "Mujhe samajh nahi aaya, kya aap dobara bol sakte hain?";

// Function to send message to Telegram bot and handle response
async function sendMessage() {
    const message = document.getElementById('userMessage').value.toLowerCase();
    let response = defaultResponse;

    // Check predefined responses
    for (let keyword in responses) {
        if (message.includes(keyword)) {
            const possibleResponses = responses[keyword];
            response = possibleResponses[Math.floor(Math.random() * possibleResponses.length)];
            break;
        }
    }

    // Send typing action to Telegram bot
    await sendTypingAction();

    // Show "typing..." in the browser for 2 seconds
    document.getElementById('botResponse').innerText = 'Typing...';
    await new Promise(resolve => setTimeout(resolve, 2000));

    // Send message to Telegram bot
    await sendToTelegramBot(response);

    // Display response in the browser
    document.getElementById('botResponse').innerText = response;
}

// Function to send typing action to the Telegram bot
async function sendTypingAction() {
    const url = `https://api.telegram.org/bot${botToken}/sendChatAction?chat_id=${chatId}&action=typing`;
    
    try {
        await fetch(url); // No need to process the response, just sending the typing action
    } catch (error) {
        console.error("Error sending typing action to Telegram:", error);
    }
}

// Function to send a message to the Telegram bot using its API
async function sendToTelegramBot(message) {
    const url = `https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(message)}`;
    
    try {
        const response = await fetch(url);
        const data = await response.json();
        if (!data.ok) {
            console.error("Telegram API error:", data.description);
        }
    } catch (error) {
        console.error("Error sending message to Telegram:", error);
    }
}
</script>

</body>
</html>
